![Aetheric Banner](https://github.com/aetheric-oss/.github/raw/main/assets/doc-banner.png)

# Interface Control Document (ICD) - `svc-telemetry`

## :telescope: Overview

This document defines the gRPC and REST interfaces unique to the `svc-telemetry` microservice.

### Metadata

| Attribute     | Description                                                       |
| ------------- |-------------------------------------------------------------------|
| Maintainer(s) | [Aetheric Realm Team](https://github.com/orgs/aetheric-oss/teams/dev-realm) |
| Stuckee       | A.M. Smith ([@amsmith-pro](https://github.com/amsmith-pro))         |
| Status        | Draft                                                             |

## :books: Related Documents

Document | Description
--- | ---
[High-Level Concept of Operations (CONOPS)](https://github.com/aetheric-oss/se-services/blob/develop/docs/conops.md) | Overview of Aetheric microservices.
[High-Level Interface Control Document (ICD)](https://github.com/aetheric-oss/se-services/blob/develop/docs/icd.md)  | Interfaces and frameworks common to all Aetheric microservices.
[Requirements - `svc-telemetry`](https://nocodb.aetheric.nl/dashboard/#/nc/view/6ffa7547-b2ab-4d02-b5cb-ed2d3c60e2c7) | Requirements and user stories for this microservice.
[Concept of Operations - `svc-telemetry`](./conops.md) | Defines the motivation and duties of this microservice.
[Software Design Document (SDD) - `svc-telemetry`](./sdd.md) | Specifies the internal activity of this microservice.

## :hammer: Frameworks

See [High-Level Services ICD](https://github.com/aetheric-oss/se-services/blob/develop/docs/icd.md).

## :mailbox: REST

### Files

Filename | Description
--- | ---
`openapi/types.rs` | Data types used for REST requests and replies.
`client-rest/src/lib.rs` | Imports the REST types file to create the `svc-telemetry-client-rest` library, usable by other Rust crates.

### Authentication

See [High-Level Services ICD](https://github.com/aetheric-oss/se-services/blob/develop/docs/icd.md).

### Endpoints

See the [Arrow API Documentation](https://www.arrowair.com/docs/category/apis) for specific request arguments.

| Endpoint | Type | Description |
| ---- | --- | ---- |
| `/health` | GET | 200 OK if all microservice dependencies are connected to this service.
| `/telemetry/adsb` | POST | Report a packet conforming to [ADS-B protocol](https://airmetar.main.jp/radio/ADS-B%20Decoding%20Guide.pdf).
| `/telemetry/login` | GET | Request a JSON Web Token (JWT) for the vehicle to post network remote ID telemetry.
| `/telemetry/netrid` | POST | Report a packet conforming to Network Remote ID protocol. Requires a JWT token (see `/telemetry/login`)

## :speech_balloon: gRPC

### Files

[grpc.proto](../proto/grpc.proto) | Common gRPC interfaces, protocol buffer file.
[grpc.rs](../client-grpc/src/grpc.rs) | Autogenerated rust client and types

### Integrated Authentication & Encryption

See [High-Level Services ICD](https://github.com/aetheric-oss/se-services/blob/develop/docs/icd.md).

### GRPC Server Methods ("Services")

GRPC server methods are called "services", an unfortunate name clash with the broader concept of web services.

| Service | Description |
| ---- | ---- |
| `IsReady` | Returns a message indicating if this service is ready for requests.<br>Similar to a health check, if a server is not "ready" it could be considered dead by the client making the request.

### GRPC Client Messages ("Requests")

This service does not have any unique requests.
